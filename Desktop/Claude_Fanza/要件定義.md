# FANZA動画スワイプアプリ 要件定義書

## 📋 プロジェクト概要

### プロジェクト名
FANZA Sample Video Swipe App

### 目的
- FANZA APIを活用した縦スワイプ型動画視聴アプリの開発
- YouTube Shorts / TikTok風のUIでサンプル動画を無限スクロール
- AI学習による個人化レコメンドシステム
- 収益化機能による持続可能なビジネスモデル

### ターゲットユーザー
- 18歳以上の成人男性
- スマートフォンでの動画視聴を好むユーザー
- 短時間で多くのコンテンツを効率的に探したいユーザー

---

## 🎯 機能要件

### 1. コア機能

#### 1.1 動画視聴機能
- **縦スワイプナビゲーション**: 上下スワイプで動画切り替え
- **自動再生**: 動画の自動開始・ループ再生
- **動画操作**:
  - 長押し: 2倍速再生（画面に「2x」表示）
  - 右ダブルクリック/タップ: 15秒スキップ
  - 左ダブルクリック/タップ: 15秒巻き戻し
  - タップ: 再生/一時停止切り替え
  - ミュート/ミュート解除

#### 1.2 FANZA API統合
- **リアルタイムデータ取得**: FANZA APIからの動画情報取得
- **サンプル動画再生**: HTML5 video要素での動画再生
- **商品情報表示**: タイトル、女優名、ジャンル、価格、評価
- **無限スクロール**: 自動的な追加コンテンツ読み込み

### 2. AI学習・個人化機能

#### 2.1 オンボーディング機能
- **初回好み学習**: 10個の動画で左右スワイプによる好み収集
- **プログレス表示**: 進行状況バーと完了率表示
- **スキップ機能**: オンボーディングの途中終了オプション

#### 2.2 レコメンドシステム
- **行動分析**:
  - 視聴時間の記録
  - スキップパターンの学習
  - いいね/興味なしの反映
- **ジャンル好み学習**: 視聴履歴からジャンル嗜好を分析
- **女優好み学習**: お気に入り女優の自動認識
- **AIスコアリング**: 個人化されたコンテンツ順序

#### 2.3 継続学習
- **リアルタイム学習**: 視聴中の行動を即座に反映
- **左右スワイプ**: 👎（興味なし）/ ❤️（お気に入り）
- **好み再設定**: いつでもオンボーディングを再実行可能

### 3. ソーシャル・エンゲージメント機能

#### 3.1 クリップ機能
- **時間指定クリップ**: 任意の時点でクリップ作成
- **クリップタイトル**: ユーザーが自由にタイトル設定
- **いいね機能**: クリップに対する評価システム
- **人気順ソート**: いいね数による自動並び替え
- **ワンクリック再生**: クリップタップでその時点から再生開始

#### 3.2 お気に入り機能
- **ワンタップ保存**: ハートボタンでお気に入り登録
- **お気に入り一覧**: 保存済み動画の管理画面
- **視覚的フィードバック**: 保存状態の明確な表示

### 4. 検索・発見機能

#### 4.1 検索システム
- **リアルタイム検索**: FANZA APIを使用した即座の検索結果
- **マルチ検索**: タイトル・女優・ジャンルを横断検索
- **検索結果表示**: サムネイル付きグリッド表示
- **直接ジャンプ**: 検索結果から即座に動画へ移動

#### 4.2 フィルタリング
- **ジャンル設定**: 複数ジャンルの選択・除外
- **動画長さ**: 短編・中編・長編での絞り込み
- **画質設定**: 高画質・標準・低画質の選択

### 5. ユーザー管理機能

#### 5.1 アカウント機能
- **ログイン/ログアウト**: 簡単な認証システム
- **設定保存**: ローカルストレージでの設定永続化
- **プロフィール管理**: ユーザー情報の表示・編集

#### 5.2 データ管理
- **視聴履歴**: 過去の視聴記録保存
- **学習データ**: AI分析用の行動データ蓄積
- **設定同期**: デバイス間での設定共有（将来実装）

---

## 💰 収益化要件

### 1. アフィリエイト機能

#### 1.1 商品詳細機能
- **詳細ボタン**: 左下に控えめな白ボタン配置
- **詳細モーダル**: 
  - 作品情報（タイトル、女優、評価、レビュー数）
  - 価格情報（現在価格、元価格、割引率）
  - セール情報（終了日時、限定表示）
  - ジャンルタグ表示
- **購入ボタン**: 外部サイト(FANZA)への導線
- **収益トラッキング**: クリック数と収益の自動計測

#### 1.2 外部サイト連携
- **アフィリエイトリンク**: FANZA商品ページへの直接リンク
- **新規タブ開き**: 元アプリを閉じずに外部サイトへ誘導
- **成果測定**: クリックスルー率の分析

### 2. 広告システム

#### 2.1 非侵入型広告
- **表示タイミング**: 30秒視聴後に表示
- **表示時間**: 5秒間の自動表示
- **スキップ機能**: ユーザー操作での早期終了
- **収益計測**: 広告表示回数の自動カウント

#### 2.2 広告配置
- **オーバーレイ広告**: 動画中央に半透明表示
- **スポンサー表示**: 広告であることの明確な表示
- **ブランドセーフティ**: 適切な広告内容の確保

### 3. 収益分析

#### 3.1 KPI測定
- **クリックスルー率**: 詳細ボタンのクリック率
- **コンバージョン率**: 外部サイトでの購入率（推定）
- **広告視聴率**: 広告の完全視聴率
- **ユーザーエンゲージメント**: 滞在時間、スワイプ回数

#### 3.2 収益最適化
- **A/Bテスト**: ボタン配置・色彩の最適化
- **個人化広告**: ユーザー好みに応じた広告表示
- **価格最適化**: 推奨商品の価格帯分析

---

## 🎨 UI/UX要件

### 1. デザイン原則

#### 1.1 カラーパレット
- **メインカラー**: 白・黒・グレーの統一
- **アクセントカラー**: 控えめな色使い
- **背景**: 動画を最大限に活かす黒背景

#### 1.2 ボタンデザイン
- **メインアクション**: 黒背景・白文字
- **セカンダリ**: 白背景・黒文字
- **非アクティブ**: グレー系統
- **選択状態**: 明確な視覚的フィードバック

### 2. レスポンシブデザイン

#### 2.1 モバイルファースト
- **縦向き最適化**: ポートレートモードでの最適表示
- **タッチ操作**: 指でのスワイプ・タップに最適化
- **画面サイズ対応**: 様々な画面サイズでの適切な表示

#### 2.2 操作性
- **直感的配置**: 機能ボタンの論理的配置
- **視認性**: 十分なコントラストと文字サイズ
- **アクセシビリティ**: 視覚障害者にも配慮した設計

### 3. アニメーション・フィードバック

#### 3.1 トランジション
- **スムーズな切り替え**: 動画間の滑らかな遷移
- **ボタンホバー**: マウスオーバー時の視覚フィードバック
- **ローディング**: 読み込み中の適切な表示

#### 3.2 インタラクション
- **スワイプ感度**: 適切なスワイプ閾値設定
- **長押し検知**: 500ms後の2倍速開始
- **ダブルタップ**: 300ms以内の連続タップ検知

---

## 🔧 技術要件

### 1. フロントエンド技術

#### 1.1 基盤技術
- **React 18**: 関数コンポーネントとHooks使用
- **JavaScript ES6+**: モダンな JavaScript構文
- **Tailwind CSS**: ユーティリティファーストCSS
- **HTML5 Video**: ネイティブ動画再生機能

#### 1.2 状態管理
- **React Hooks**: useState, useEffect, useRef
- **ローカルストレージ**: 設定・履歴の永続化
- **セッション管理**: ユーザー状態の保持

### 2. API統合

#### 2.1 FANZA API
- **接続方式**: JSONP（CORS回避）
- **エラーハンドリング**: 接続失敗時の適切な処理
- **タイムアウト設定**: 10秒でのタイムアウト
- **レート制限**: API呼び出し頻度の制御

#### 2.2 データ処理
- **レスポンス変換**: FANZA APIレスポンスの正規化
- **キャッシュ機能**: 取得済みデータの一時保存
- **バックグラウンド更新**: 非同期でのデータ更新

### 3. パフォーマンス要件

#### 3.1 読み込み速度
- **初期表示**: 3秒以内での初回動画表示
- **動画切り替え**: 1秒以内でのスワイプ応答
- **検索応答**: 2秒以内での検索結果表示

#### 3.2 最適化
- **遅延読み込み**: 必要時のみのコンテンツ取得
- **メモリ管理**: 適切なリソース解放
- **バンドルサイズ**: 軽量なコード実装

---

## 🛡️ セキュリティ要件

### 1. データ保護

#### 1.1 個人情報
- **最小限収集**: 必要最小限のデータのみ収集
- **ローカル保存**: 機密情報はローカルストレージのみ
- **暗号化**: 重要データの暗号化保存

#### 1.2 API保護
- **API キー管理**: 環境変数での安全な管理
- **レート制限**: API乱用防止
- **エラー情報**: 機密情報の漏洩防止

### 2. コンプライアンス

#### 2.1 年齢制限
- **成人向けコンテンツ**: 18歳以上の確認
- **適切な警告**: コンテンツの性質に関する注意表示
- **法的遵守**: 各国の法律に準拠

#### 2.2 プライバシー
- **データ使用目的**: 明確な使用目的の説明
- **オプトアウト**: ユーザーの選択権確保
- **透明性**: データ収集・使用の透明化

---

## 📱 対応環境

### 1. ブラウザ対応

#### 1.1 デスクトップ
- **Chrome**: 最新版 + 過去2バージョン
- **Firefox**: 最新版 + 過去2バージョン
- **Safari**: 最新版 + 過去2バージョン
- **Edge**: 最新版 + 過去2バージョン

#### 1.2 モバイル
- **iOS Safari**: iOS 14以上
- **Android Chrome**: Android 8以上
- **Samsung Internet**: 最新版
- **その他**: 主要モバイルブラウザ

### 2. デバイス仕様

#### 2.1 最小要件
- **RAM**: 2GB以上
- **ストレージ**: 100MB以上の空き容量
- **ネットワーク**: 3G以上の通信速度

#### 2.2 推奨環境
- **RAM**: 4GB以上
- **ネットワーク**: WiFi または 4G/5G
- **画面解像度**: 1080p以上

---

## 🚀 開発・デプロイ要件

### 1. 開発環境

#### 1.1 開発ツール
- **Node.js**: 16以上
- **パッケージマネージャー**: npm または yarn
- **コードエディタ**: VS Code推奨
- **バージョン管理**: Git

#### 1.2 開発フロー
- **ローカル開発**: 開発サーバーでの動作確認
- **テスト**: 単体テスト・統合テストの実施
- **ビルド**: 本番用最適化ビルド
- **デプロイ**: 自動デプロイパイプライン

### 2. 本番環境

#### 2.1 ホスティング
- **CDN**: 高速コンテンツ配信
- **HTTPS**: SSL証明書の必須使用
- **ドメイン**: 独自ドメインの設定
- **監視**: アプリケーション監視の設定

#### 2.2 運用要件
- **稼働率**: 99.5%以上
- **バックアップ**: 定期的なデータバックアップ
- **更新**: 定期的なセキュリティ更新
- **サポート**: ユーザーサポート体制

---

## 📊 成功指標（KPI）

### 1. ユーザーエンゲージメント

#### 1.1 利用度指標
- **DAU**: 日次アクティブユーザー数
- **滞在時間**: 平均セッション時間（目標: 10分以上）
- **動画視聴数**: ユーザー1人あたりの動画視聴数
- **リピート率**: 再訪問率（目標: 70%以上）

#### 1.2 満足度指標
- **クリップ作成率**: 動画視聴に対するクリップ作成割合
- **お気に入り率**: 動画視聴に対するお気に入り登録割合
- **検索利用率**: アクティブユーザーの検索機能利用率

### 2. 収益指標

#### 2.1 直接収益
- **CTR**: 詳細ボタンのクリック率（目標: 5%以上）
- **収益/ユーザー**: ユーザー1人あたりの月間収益
- **コンバージョン率**: 外部サイトでの購入率（推定）

#### 2.2 間接効果
- **ブランド認知**: アプリ認知度の向上
- **ユーザー獲得コスト**: 新規ユーザー獲得にかかるコスト
- **LTV**: ユーザーのライフタイムバリュー

### 3. 技術指標

#### 3.1 パフォーマンス
- **ページ読み込み速度**: 3秒以内
- **API応答時間**: 2秒以内
- **エラー率**: 1%以下
- **稼働率**: 99.5%以上

#### 3.2 品質指標
- **バグ報告数**: 月間10件以下
- **ユーザー満足度**: 4.0/5.0以上
- **アプリストア評価**: 4.2/5.0以上（将来のモバイルアプリ化時）
